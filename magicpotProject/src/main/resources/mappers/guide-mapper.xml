<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="guideMapper">

	<resultMap id="Guide" type="Guide" >
		<result column="gu_title" property="guTitle"/>
		<result column="gu_content" property="guContent"/>
		<result column="enroll_date" property="enrollDate"/>
		<result column="modify_date" property="modifyDate"/>
	</resultMap>


	<!-- 이용약관 세부 / 수정용 페이지에 띄울 기본 이용약관 조회 -->
	<select id="proModifyForm" resultType="string">
		select
				gu_provision
		  from  guide	 
	</select>

	<!-- 이용약관 수정 -->
	<update id="proModify" parameterType="Guide">
		update
				guide
		   set	gu_provision = #{gu_provision}
	</update>

	<!-- 이용가이드 페이지 -->
	<select id="guideForm" resultMap="Guide">
		select
		      gu_title
		    , gu_content
		    , enroll_date
		    , modify_date
		 from guide
		where
		 	  <choose>
		 	  	<when test="ctg == 1">
		 	  		gu_title in ('결제', '리워드')  
		 	  	</when>	
		 	  	<when test="ctg == 2">
		 	  		gu_title in ('프로젝트 신청', '프로젝트 심사')  
		 	  	</when>	
		 	  	<when test="ctg == 3">
		 	  		gu_title in ('정산', '펀딩진행')  
		 	  	</when>	
		 	  	<otherwise>
		 	  		gu_title in ('크라우드 펀딩이란?', '회원가입') 
		 	  	</otherwise>
		 	  </choose>
	</select>
	
</mapper>